/*

  Data on fluence to dose calculation (ICRP 116)

  Assuming th device is worn on the chest (AP direction)

  2024, Kian Shaker

*/

#ifndef DOSECONVERSION_H
#define DOSECONVERSION_H

// Define a struct to hold energy and per photon dose conversion coefficient
struct DoseConversionData {
  uint16_t energy;       // Energy in keV
  float coefficient;      // Dose conversion coefficient
};

// Data for AP, ICRP 116. Converting photon energy to pSv/cm^2, where the denominater is the scintillator area.
// Table A.1: "Photons: effective dose per fluence, in units of pSv*cm2, for monoenergetic particles incident in various geometries. ""
// Range: 10 keV - 1 MeV (probably overkill)
// Step size: 1 keV (probably granular enough considering the spectral resolution of the scint + SiPM assembly)
const DoseConversionData doseData[991] = {
  {10, 0.0685},
  {11, 0.086},
  {12, 0.1035},
  {13, 0.121},
  {14, 0.1385},
  {15, 0.156},
  {16, 0.1698},
  {17, 0.1836},
  {18, 0.1974},
  {19, 0.2112},
  {20, 0.225},
  {21, 0.2338},
  {22, 0.2426},
  {23, 0.2514},
  {24, 0.2602},
  {25, 0.269},
  {26, 0.2778},
  {27, 0.2866},
  {28, 0.2954},
  {29, 0.3042},
  {30, 0.313},
  {31, 0.3168},
  {32, 0.3206},
  {33, 0.3244},
  {34, 0.3282},
  {35, 0.332},
  {36, 0.3358},
  {37, 0.3396},
  {38, 0.3434},
  {39, 0.3472},
  {40, 0.351},
  {41, 0.3529},
  {42, 0.3548},
  {43, 0.3567},
  {44, 0.3586},
  {45, 0.3605},
  {46, 0.3624},
  {47, 0.3643},
  {48, 0.3662},
  {49, 0.3681},
  {50, 0.37},
  {51, 0.372},
  {52, 0.374},
  {53, 0.376},
  {54, 0.378},
  {55, 0.38},
  {56, 0.382},
  {57, 0.384},
  {58, 0.386},
  {59, 0.388},
  {60, 0.39},
  {61, 0.3923},
  {62, 0.3946},
  {63, 0.3969},
  {64, 0.3992},
  {65, 0.4015},
  {66, 0.4038},
  {67, 0.4061},
  {68, 0.4084},
  {69, 0.4107},
  {70, 0.413},
  {71, 0.4161},
  {72, 0.4192},
  {73, 0.4223},
  {74, 0.4254},
  {75, 0.4285},
  {76, 0.4316},
  {77, 0.4347},
  {78, 0.4378},
  {79, 0.4409},
  {80, 0.444},
  {81, 0.44775},
  {82, 0.4515},
  {83, 0.45525},
  {84, 0.459},
  {85, 0.46275},
  {86, 0.4665},
  {87, 0.47025},
  {88, 0.474},
  {89, 0.47775},
  {90, 0.4815},
  {91, 0.48525},
  {92, 0.489},
  {93, 0.49275},
  {94, 0.4965},
  {95, 0.50025},
  {96, 0.504},
  {97, 0.50775},
  {98, 0.5115},
  {99, 0.51525},
  {100, 0.519},
  {101, 0.52358},
  {102, 0.52816},
  {103, 0.53274},
  {104, 0.53732},
  {105, 0.5419},
  {106, 0.54648},
  {107, 0.55106},
  {108, 0.55564},
  {109, 0.56022},
  {110, 0.5648},
  {111, 0.56938},
  {112, 0.57396},
  {113, 0.57854},
  {114, 0.58312},
  {115, 0.5877},
  {116, 0.59228},
  {117, 0.59686},
  {118, 0.60144},
  {119, 0.60602},
  {120, 0.6106},
  {121, 0.61518},
  {122, 0.61976},
  {123, 0.62434},
  {124, 0.62892},
  {125, 0.6335},
  {126, 0.63808},
  {127, 0.64266},
  {128, 0.64724},
  {129, 0.65182},
  {130, 0.6564},
  {131, 0.66098},
  {132, 0.66556},
  {133, 0.67014},
  {134, 0.67472},
  {135, 0.6793},
  {136, 0.68388},
  {137, 0.68846},
  {138, 0.69304},
  {139, 0.69762},
  {140, 0.7022},
  {141, 0.70678},
  {142, 0.71136},
  {143, 0.71594},
  {144, 0.72052},
  {145, 0.7251},
  {146, 0.72968},
  {147, 0.73426},
  {148, 0.73884},
  {149, 0.74342},
  {150, 0.748},
  {151, 0.75304},
  {152, 0.75808},
  {153, 0.76312},
  {154, 0.76816},
  {155, 0.7732},
  {156, 0.77824},
  {157, 0.78328},
  {158, 0.78832},
  {159, 0.79336},
  {160, 0.7984},
  {161, 0.80344},
  {162, 0.80848},
  {163, 0.81352},
  {164, 0.81856},
  {165, 0.8236},
  {166, 0.82864},
  {167, 0.83368},
  {168, 0.83872},
  {169, 0.84376},
  {170, 0.8488},
  {171, 0.85384},
  {172, 0.85888},
  {173, 0.86392},
  {174, 0.86896},
  {175, 0.874},
  {176, 0.87904},
  {177, 0.88408},
  {178, 0.88912},
  {179, 0.89416},
  {180, 0.8992},
  {181, 0.90424},
  {182, 0.90928},
  {183, 0.91432},
  {184, 0.91936},
  {185, 0.9244},
  {186, 0.92944},
  {187, 0.93448},
  {188, 0.93952},
  {189, 0.94456},
  {190, 0.9496},
  {191, 0.95464},
  {192, 0.95968},
  {193, 0.96472},
  {194, 0.96976},
  {195, 0.9748},
  {196, 0.97984},
  {197, 0.98488},
  {198, 0.98992},
  {199, 0.99496},
  {200, 1},
  {201, 1.0051},
  {202, 1.0102},
  {203, 1.0153},
  {204, 1.0204},
  {205, 1.0255},
  {206, 1.0306},
  {207, 1.0357},
  {208, 1.0408},
  {209, 1.0459},
  {210, 1.051},
  {211, 1.0561},
  {212, 1.0612},
  {213, 1.0663},
  {214, 1.0714},
  {215, 1.0765},
  {216, 1.0816},
  {217, 1.0867},
  {218, 1.0918},
  {219, 1.0969},
  {220, 1.102},
  {221, 1.1071},
  {222, 1.1122},
  {223, 1.1173},
  {224, 1.1224},
  {225, 1.1275},
  {226, 1.1326},
  {227, 1.1377},
  {228, 1.1428},
  {229, 1.1479},
  {230, 1.153},
  {231, 1.1581},
  {232, 1.1632},
  {233, 1.1683},
  {234, 1.1734},
  {235, 1.1785},
  {236, 1.1836},
  {237, 1.1887},
  {238, 1.1938},
  {239, 1.1989},
  {240, 1.204},
  {241, 1.2091},
  {242, 1.2142},
  {243, 1.2193},
  {244, 1.2244},
  {245, 1.2295},
  {246, 1.2346},
  {247, 1.2397},
  {248, 1.2448},
  {249, 1.2499},
  {250, 1.255},
  {251, 1.2601},
  {252, 1.2652},
  {253, 1.2703},
  {254, 1.2754},
  {255, 1.2805},
  {256, 1.2856},
  {257, 1.2907},
  {258, 1.2958},
  {259, 1.3009},
  {260, 1.306},
  {261, 1.3111},
  {262, 1.3162},
  {263, 1.3213},
  {264, 1.3264},
  {265, 1.3315},
  {266, 1.3366},
  {267, 1.3417},
  {268, 1.3468},
  {269, 1.3519},
  {270, 1.357},
  {271, 1.3621},
  {272, 1.3672},
  {273, 1.3723},
  {274, 1.3774},
  {275, 1.3825},
  {276, 1.3876},
  {277, 1.3927},
  {278, 1.3978},
  {279, 1.4029},
  {280, 1.408},
  {281, 1.4131},
  {282, 1.4182},
  {283, 1.4233},
  {284, 1.4284},
  {285, 1.4335},
  {286, 1.4386},
  {287, 1.4437},
  {288, 1.4488},
  {289, 1.4539},
  {290, 1.459},
  {291, 1.4641},
  {292, 1.4692},
  {293, 1.4743},
  {294, 1.4794},
  {295, 1.4845},
  {296, 1.4896},
  {297, 1.4947},
  {298, 1.4998},
  {299, 1.5049},
  {300, 1.51},
  {301, 1.5149},
  {302, 1.5198},
  {303, 1.5247},
  {304, 1.5296},
  {305, 1.5345},
  {306, 1.5394},
  {307, 1.5443},
  {308, 1.5492},
  {309, 1.5541},
  {310, 1.559},
  {311, 1.5639},
  {312, 1.5688},
  {313, 1.5737},
  {314, 1.5786},
  {315, 1.5835},
  {316, 1.5884},
  {317, 1.5933},
  {318, 1.5982},
  {319, 1.6031},
  {320, 1.608},
  {321, 1.6129},
  {322, 1.6178},
  {323, 1.6227},
  {324, 1.6276},
  {325, 1.6325},
  {326, 1.6374},
  {327, 1.6423},
  {328, 1.6472},
  {329, 1.6521},
  {330, 1.657},
  {331, 1.6619},
  {332, 1.6668},
  {333, 1.6717},
  {334, 1.6766},
  {335, 1.6815},
  {336, 1.6864},
  {337, 1.6913},
  {338, 1.6962},
  {339, 1.7011},
  {340, 1.706},
  {341, 1.7109},
  {342, 1.7158},
  {343, 1.7207},
  {344, 1.7256},
  {345, 1.7305},
  {346, 1.7354},
  {347, 1.7403},
  {348, 1.7452},
  {349, 1.7501},
  {350, 1.755},
  {351, 1.7599},
  {352, 1.7648},
  {353, 1.7697},
  {354, 1.7746},
  {355, 1.7795},
  {356, 1.7844},
  {357, 1.7893},
  {358, 1.7942},
  {359, 1.7991},
  {360, 1.804},
  {361, 1.8089},
  {362, 1.8138},
  {363, 1.8187},
  {364, 1.8236},
  {365, 1.8285},
  {366, 1.8334},
  {367, 1.8383},
  {368, 1.8432},
  {369, 1.8481},
  {370, 1.853},
  {371, 1.8579},
  {372, 1.8628},
  {373, 1.8677},
  {374, 1.8726},
  {375, 1.8775},
  {376, 1.8824},
  {377, 1.8873},
  {378, 1.8922},
  {379, 1.8971},
  {380, 1.902},
  {381, 1.9069},
  {382, 1.9118},
  {383, 1.9167},
  {384, 1.9216},
  {385, 1.9265},
  {386, 1.9314},
  {387, 1.9363},
  {388, 1.9412},
  {389, 1.9461},
  {390, 1.951},
  {391, 1.9559},
  {392, 1.9608},
  {393, 1.9657},
  {394, 1.9706},
  {395, 1.9755},
  {396, 1.9804},
  {397, 1.9853},
  {398, 1.9902},
  {399, 1.9951},
  {400, 2},
  {401, 2.0047},
  {402, 2.0094},
  {403, 2.0141},
  {404, 2.0188},
  {405, 2.0235},
  {406, 2.0282},
  {407, 2.0329},
  {408, 2.0376},
  {409, 2.0423},
  {410, 2.047},
  {411, 2.0517},
  {412, 2.0564},
  {413, 2.0611},
  {414, 2.0658},
  {415, 2.0705},
  {416, 2.0752},
  {417, 2.0799},
  {418, 2.0846},
  {419, 2.0893},
  {420, 2.094},
  {421, 2.0987},
  {422, 2.1034},
  {423, 2.1081},
  {424, 2.1128},
  {425, 2.1175},
  {426, 2.1222},
  {427, 2.1269},
  {428, 2.1316},
  {429, 2.1363},
  {430, 2.141},
  {431, 2.1457},
  {432, 2.1504},
  {433, 2.1551},
  {434, 2.1598},
  {435, 2.1645},
  {436, 2.1692},
  {437, 2.1739},
  {438, 2.1786},
  {439, 2.1833},
  {440, 2.188},
  {441, 2.1927},
  {442, 2.1974},
  {443, 2.2021},
  {444, 2.2068},
  {445, 2.2115},
  {446, 2.2162},
  {447, 2.2209},
  {448, 2.2256},
  {449, 2.2303},
  {450, 2.235},
  {451, 2.2397},
  {452, 2.2444},
  {453, 2.2491},
  {454, 2.2538},
  {455, 2.2585},
  {456, 2.2632},
  {457, 2.2679},
  {458, 2.2726},
  {459, 2.2773},
  {460, 2.282},
  {461, 2.2867},
  {462, 2.2914},
  {463, 2.2961},
  {464, 2.3008},
  {465, 2.3055},
  {466, 2.3102},
  {467, 2.3149},
  {468, 2.3196},
  {469, 2.3243},
  {470, 2.329},
  {471, 2.3337},
  {472, 2.3384},
  {473, 2.3431},
  {474, 2.3478},
  {475, 2.3525},
  {476, 2.3572},
  {477, 2.3619},
  {478, 2.3666},
  {479, 2.3713},
  {480, 2.376},
  {481, 2.3807},
  {482, 2.3854},
  {483, 2.3901},
  {484, 2.3948},
  {485, 2.3995},
  {486, 2.4042},
  {487, 2.4089},
  {488, 2.4136},
  {489, 2.4183},
  {490, 2.423},
  {491, 2.4277},
  {492, 2.4324},
  {493, 2.4371},
  {494, 2.4418},
  {495, 2.4465},
  {496, 2.4512},
  {497, 2.4559},
  {498, 2.4606},
  {499, 2.4653},
  {500, 2.47},
  {501, 2.47454545454545},
  {502, 2.47909090909091},
  {503, 2.48363636363636},
  {504, 2.48818181818182},
  {505, 2.49272727272727},
  {506, 2.49727272727273},
  {507, 2.50181818181818},
  {508, 2.50636363636364},
  {509, 2.51090909090909},
  {510, 2.51545454545455},
  {511, 2.52},
  {512, 2.52438202247191},
  {513, 2.52876404494382},
  {514, 2.53314606741573},
  {515, 2.53752808988764},
  {516, 2.54191011235955},
  {517, 2.54629213483146},
  {518, 2.55067415730337},
  {519, 2.55505617977528},
  {520, 2.55943820224719},
  {521, 2.5638202247191},
  {522, 2.56820224719101},
  {523, 2.57258426966292},
  {524, 2.57696629213483},
  {525, 2.58134831460674},
  {526, 2.58573033707865},
  {527, 2.59011235955056},
  {528, 2.59449438202247},
  {529, 2.59887640449438},
  {530, 2.60325842696629},
  {531, 2.6076404494382},
  {532, 2.61202247191011},
  {533, 2.61640449438202},
  {534, 2.62078651685393},
  {535, 2.62516853932584},
  {536, 2.62955056179775},
  {537, 2.63393258426966},
  {538, 2.63831460674157},
  {539, 2.64269662921348},
  {540, 2.64707865168539},
  {541, 2.6514606741573},
  {542, 2.65584269662921},
  {543, 2.66022471910112},
  {544, 2.66460674157303},
  {545, 2.66898876404494},
  {546, 2.67337078651685},
  {547, 2.67775280898876},
  {548, 2.68213483146067},
  {549, 2.68651685393258},
  {550, 2.69089887640449},
  {551, 2.6952808988764},
  {552, 2.69966292134831},
  {553, 2.70404494382022},
  {554, 2.70842696629213},
  {555, 2.71280898876404},
  {556, 2.71719101123596},
  {557, 2.72157303370787},
  {558, 2.72595505617978},
  {559, 2.73033707865169},
  {560, 2.7347191011236},
  {561, 2.73910112359551},
  {562, 2.74348314606742},
  {563, 2.74786516853933},
  {564, 2.75224719101124},
  {565, 2.75662921348315},
  {566, 2.76101123595506},
  {567, 2.76539325842697},
  {568, 2.76977528089888},
  {569, 2.77415730337079},
  {570, 2.7785393258427},
  {571, 2.78292134831461},
  {572, 2.78730337078652},
  {573, 2.79168539325843},
  {574, 2.79606741573034},
  {575, 2.80044943820225},
  {576, 2.80483146067416},
  {577, 2.80921348314607},
  {578, 2.81359550561798},
  {579, 2.81797752808989},
  {580, 2.8223595505618},
  {581, 2.82674157303371},
  {582, 2.83112359550562},
  {583, 2.83550561797753},
  {584, 2.83988764044944},
  {585, 2.84426966292135},
  {586, 2.84865168539326},
  {587, 2.85303370786517},
  {588, 2.85741573033708},
  {589, 2.86179775280899},
  {590, 2.8661797752809},
  {591, 2.87056179775281},
  {592, 2.87494382022472},
  {593, 2.87932584269663},
  {594, 2.88370786516854},
  {595, 2.88808988764045},
  {596, 2.89247191011236},
  {597, 2.89685393258427},
  {598, 2.90123595505618},
  {599, 2.90561797752809},
  {600, 2.91},
  {601, 2.9141935483871},
  {602, 2.91838709677419},
  {603, 2.92258064516129},
  {604, 2.92677419354839},
  {605, 2.93096774193548},
  {606, 2.93516129032258},
  {607, 2.93935483870968},
  {608, 2.94354838709677},
  {609, 2.94774193548387},
  {610, 2.95193548387097},
  {611, 2.95612903225806},
  {612, 2.96032258064516},
  {613, 2.96451612903226},
  {614, 2.96870967741936},
  {615, 2.97290322580645},
  {616, 2.97709677419355},
  {617, 2.98129032258065},
  {618, 2.98548387096774},
  {619, 2.98967741935484},
  {620, 2.99387096774194},
  {621, 2.99806451612903},
  {622, 3.00225806451613},
  {623, 3.00645161290323},
  {624, 3.01064516129032},
  {625, 3.01483870967742},
  {626, 3.01903225806452},
  {627, 3.02322580645161},
  {628, 3.02741935483871},
  {629, 3.03161290322581},
  {630, 3.0358064516129},
  {631, 3.04},
  {632, 3.0441935483871},
  {633, 3.04838709677419},
  {634, 3.05258064516129},
  {635, 3.05677419354839},
  {636, 3.06096774193548},
  {637, 3.06516129032258},
  {638, 3.06935483870968},
  {639, 3.07354838709677},
  {640, 3.07774193548387},
  {641, 3.08193548387097},
  {642, 3.08612903225806},
  {643, 3.09032258064516},
  {644, 3.09451612903226},
  {645, 3.09870967741935},
  {646, 3.10290322580645},
  {647, 3.10709677419355},
  {648, 3.11129032258065},
  {649, 3.11548387096774},
  {650, 3.11967741935484},
  {651, 3.12387096774194},
  {652, 3.12806451612903},
  {653, 3.13225806451613},
  {654, 3.13645161290323},
  {655, 3.14064516129032},
  {656, 3.14483870967742},
  {657, 3.14903225806452},
  {658, 3.15322580645161},
  {659, 3.15741935483871},
  {660, 3.16161290322581},
  {661, 3.1658064516129},
  {662, 3.17},
  {663, 3.17405797101449},
  {664, 3.17811594202899},
  {665, 3.18217391304348},
  {666, 3.18623188405797},
  {667, 3.19028985507246},
  {668, 3.19434782608696},
  {669, 3.19840579710145},
  {670, 3.20246376811594},
  {671, 3.20652173913044},
  {672, 3.21057971014493},
  {673, 3.21463768115942},
  {674, 3.21869565217391},
  {675, 3.22275362318841},
  {676, 3.2268115942029},
  {677, 3.23086956521739},
  {678, 3.23492753623188},
  {679, 3.23898550724638},
  {680, 3.24304347826087},
  {681, 3.24710144927536},
  {682, 3.25115942028986},
  {683, 3.25521739130435},
  {684, 3.25927536231884},
  {685, 3.26333333333333},
  {686, 3.26739130434783},
  {687, 3.27144927536232},
  {688, 3.27550724637681},
  {689, 3.2795652173913},
  {690, 3.2836231884058},
  {691, 3.28768115942029},
  {692, 3.29173913043478},
  {693, 3.29579710144928},
  {694, 3.29985507246377},
  {695, 3.30391304347826},
  {696, 3.30797101449275},
  {697, 3.31202898550725},
  {698, 3.31608695652174},
  {699, 3.32014492753623},
  {700, 3.32420289855072},
  {701, 3.32826086956522},
  {702, 3.33231884057971},
  {703, 3.3363768115942},
  {704, 3.3404347826087},
  {705, 3.34449275362319},
  {706, 3.34855072463768},
  {707, 3.35260869565217},
  {708, 3.35666666666667},
  {709, 3.36072463768116},
  {710, 3.36478260869565},
  {711, 3.36884057971015},
  {712, 3.37289855072464},
  {713, 3.37695652173913},
  {714, 3.38101449275362},
  {715, 3.38507246376812},
  {716, 3.38913043478261},
  {717, 3.3931884057971},
  {718, 3.39724637681159},
  {719, 3.40130434782609},
  {720, 3.40536231884058},
  {721, 3.40942028985507},
  {722, 3.41347826086957},
  {723, 3.41753623188406},
  {724, 3.42159420289855},
  {725, 3.42565217391304},
  {726, 3.42971014492754},
  {727, 3.43376811594203},
  {728, 3.43782608695652},
  {729, 3.44188405797101},
  {730, 3.44594202898551},
  {731, 3.45},
  {732, 3.45405797101449},
  {733, 3.45811594202899},
  {734, 3.46217391304348},
  {735, 3.46623188405797},
  {736, 3.47028985507246},
  {737, 3.47434782608696},
  {738, 3.47840579710145},
  {739, 3.48246376811594},
  {740, 3.48652173913044},
  {741, 3.49057971014493},
  {742, 3.49463768115942},
  {743, 3.49869565217391},
  {744, 3.50275362318841},
  {745, 3.5068115942029},
  {746, 3.51086956521739},
  {747, 3.51492753623188},
  {748, 3.51898550724638},
  {749, 3.52304347826087},
  {750, 3.52710144927536},
  {751, 3.53115942028986},
  {752, 3.53521739130435},
  {753, 3.53927536231884},
  {754, 3.54333333333333},
  {755, 3.54739130434783},
  {756, 3.55144927536232},
  {757, 3.55550724637681},
  {758, 3.5595652173913},
  {759, 3.5636231884058},
  {760, 3.56768115942029},
  {761, 3.57173913043478},
  {762, 3.57579710144928},
  {763, 3.57985507246377},
  {764, 3.58391304347826},
  {765, 3.58797101449275},
  {766, 3.59202898550725},
  {767, 3.59608695652174},
  {768, 3.60014492753623},
  {769, 3.60420289855073},
  {770, 3.60826086956522},
  {771, 3.61231884057971},
  {772, 3.6163768115942},
  {773, 3.6204347826087},
  {774, 3.62449275362319},
  {775, 3.62855072463768},
  {776, 3.63260869565217},
  {777, 3.63666666666667},
  {778, 3.64072463768116},
  {779, 3.64478260869565},
  {780, 3.64884057971015},
  {781, 3.65289855072464},
  {782, 3.65695652173913},
  {783, 3.66101449275362},
  {784, 3.66507246376812},
  {785, 3.66913043478261},
  {786, 3.6731884057971},
  {787, 3.67724637681159},
  {788, 3.68130434782609},
  {789, 3.68536231884058},
  {790, 3.68942028985507},
  {791, 3.69347826086957},
  {792, 3.69753623188406},
  {793, 3.70159420289855},
  {794, 3.70565217391304},
  {795, 3.70971014492754},
  {796, 3.71376811594203},
  {797, 3.71782608695652},
  {798, 3.72188405797101},
  {799, 3.72594202898551},
  {800, 3.73},
  {801, 3.7338},
  {802, 3.7376},
  {803, 3.7414},
  {804, 3.7452},
  {805, 3.749},
  {806, 3.7528},
  {807, 3.7566},
  {808, 3.7604},
  {809, 3.7642},
  {810, 3.768},
  {811, 3.7718},
  {812, 3.7756},
  {813, 3.7794},
  {814, 3.7832},
  {815, 3.787},
  {816, 3.7908},
  {817, 3.7946},
  {818, 3.7984},
  {819, 3.8022},
  {820, 3.806},
  {821, 3.8098},
  {822, 3.8136},
  {823, 3.8174},
  {824, 3.8212},
  {825, 3.825},
  {826, 3.8288},
  {827, 3.8326},
  {828, 3.8364},
  {829, 3.8402},
  {830, 3.844},
  {831, 3.8478},
  {832, 3.8516},
  {833, 3.8554},
  {834, 3.8592},
  {835, 3.863},
  {836, 3.8668},
  {837, 3.8706},
  {838, 3.8744},
  {839, 3.8782},
  {840, 3.882},
  {841, 3.8858},
  {842, 3.8896},
  {843, 3.8934},
  {844, 3.8972},
  {845, 3.901},
  {846, 3.9048},
  {847, 3.9086},
  {848, 3.9124},
  {849, 3.9162},
  {850, 3.92},
  {851, 3.9238},
  {852, 3.9276},
  {853, 3.9314},
  {854, 3.9352},
  {855, 3.939},
  {856, 3.9428},
  {857, 3.9466},
  {858, 3.9504},
  {859, 3.9542},
  {860, 3.958},
  {861, 3.9618},
  {862, 3.9656},
  {863, 3.9694},
  {864, 3.9732},
  {865, 3.977},
  {866, 3.9808},
  {867, 3.9846},
  {868, 3.9884},
  {869, 3.9922},
  {870, 3.996},
  {871, 3.9998},
  {872, 4.0036},
  {873, 4.0074},
  {874, 4.0112},
  {875, 4.015},
  {876, 4.0188},
  {877, 4.0226},
  {878, 4.0264},
  {879, 4.0302},
  {880, 4.034},
  {881, 4.0378},
  {882, 4.0416},
  {883, 4.0454},
  {884, 4.0492},
  {885, 4.053},
  {886, 4.0568},
  {887, 4.0606},
  {888, 4.0644},
  {889, 4.0682},
  {890, 4.072},
  {891, 4.0758},
  {892, 4.0796},
  {893, 4.0834},
  {894, 4.0872},
  {895, 4.091},
  {896, 4.0948},
  {897, 4.0986},
  {898, 4.1024},
  {899, 4.1062},
  {900, 4.11},
  {901, 4.1138},
  {902, 4.1176},
  {903, 4.1214},
  {904, 4.1252},
  {905, 4.129},
  {906, 4.1328},
  {907, 4.1366},
  {908, 4.1404},
  {909, 4.1442},
  {910, 4.148},
  {911, 4.1518},
  {912, 4.1556},
  {913, 4.1594},
  {914, 4.1632},
  {915, 4.167},
  {916, 4.1708},
  {917, 4.1746},
  {918, 4.1784},
  {919, 4.1822},
  {920, 4.186},
  {921, 4.1898},
  {922, 4.1936},
  {923, 4.1974},
  {924, 4.2012},
  {925, 4.205},
  {926, 4.2088},
  {927, 4.2126},
  {928, 4.2164},
  {929, 4.2202},
  {930, 4.224},
  {931, 4.2278},
  {932, 4.2316},
  {933, 4.2354},
  {934, 4.2392},
  {935, 4.243},
  {936, 4.2468},
  {937, 4.2506},
  {938, 4.2544},
  {939, 4.2582},
  {940, 4.262},
  {941, 4.2658},
  {942, 4.2696},
  {943, 4.2734},
  {944, 4.2772},
  {945, 4.281},
  {946, 4.2848},
  {947, 4.2886},
  {948, 4.2924},
  {949, 4.2962},
  {950, 4.3},
  {951, 4.3038},
  {952, 4.3076},
  {953, 4.3114},
  {954, 4.3152},
  {955, 4.319},
  {956, 4.3228},
  {957, 4.3266},
  {958, 4.3304},
  {959, 4.3342},
  {960, 4.338},
  {961, 4.3418},
  {962, 4.3456},
  {963, 4.3494},
  {964, 4.3532},
  {965, 4.357},
  {966, 4.3608},
  {967, 4.3646},
  {968, 4.3684},
  {969, 4.3722},
  {970, 4.376},
  {971, 4.3798},
  {972, 4.3836},
  {973, 4.3874},
  {974, 4.3912},
  {975, 4.395},
  {976, 4.3988},
  {977, 4.4026},
  {978, 4.4064},
  {979, 4.4102},
  {980, 4.414},
  {981, 4.4178},
  {982, 4.4216},
  {983, 4.4254},
  {984, 4.4292},
  {985, 4.433},
  {986, 4.4368},
  {987, 4.4406},
  {988, 4.4444},
  {989, 4.4482},
  {990, 4.452},
  {991, 4.4558},
  {992, 4.4596},
  {993, 4.4634},
  {994, 4.4672},
  {995, 4.471},
  {996, 4.4748},
  {997, 4.4786},
  {998, 4.4824},
  {999, 4.4862},
  {1000, 4.49}

};

float getDoseConversion(uint16_t energy) {

  // Get the corresponding index
  uint16_t index = (energy - doseData[0].energy) / (doseData[1].energy-doseData[0].energy);
  if (index >= 0 && index < sizeof(scintData)/sizeof(doseData[0])) { // Last check is to make sure the energy index is within the bounds of the table
    return doseData[index].coefficient / SCINTILLATOR_AREA; // Divide by area pSv*cm^2 -> pSv
  }
  // Return a default value (e.g., 0.0) if the energy is out of range
  return 0.0;
}

#endif  // DOSECONVERSION_H